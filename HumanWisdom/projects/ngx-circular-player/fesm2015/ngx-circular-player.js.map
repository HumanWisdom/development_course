{"version":3,"file":"ngx-circular-player.js","sources":["ng://ngx-circular-player/lib/ngx-circular-player.component.ts","ng://ngx-circular-player/lib/ngx-circular-player.module.ts","ng://ngx-circular-player/public-api.ts","ng://ngx-circular-player/ngx-circular-player.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  AfterViewInit,\n  ViewChild,\n  ElementRef,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nconst RADIUS = 50;\n\n@Component({\n  // tslint:disable component-selector\n  selector: 'ngx-circular-player',\n  templateUrl: './ngx-circular-player.component.html',\n  styleUrls: ['./ngx-circular-player.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NgxCircularPlayerComponent implements AfterViewInit {\n  @Input() radius = 120;\n  @Input() stroke = 20;\n  @Input() innerStroke = 2;\n  @Input() source: string;\n  @Input() strokeColor = '#fff';\n  @Input() progressStrokeColor = '#858585';\n  @Input() innerStrokeColor = '#eee';\n\n  @ViewChild('audio') audio: ElementRef;\n  @ViewChild('progress') progress: ElementRef;\n\n  playing = false;\n\n  toggle() {\n    this.playing = !this.playing;\n    if (this.playing) {\n      this.audio.nativeElement.play();\n    } else {\n      this.audio.nativeElement.pause();\n    }\n  }\n\n  get arrowStyle() {\n    const topWidth = this.radius / 8;\n    const bottomWidth = this.radius / 8;\n    const leftWidth = this.radius / 5;\n    return {\n      'border-top-width': `${topWidth}px`,\n      'border-bottom-width': `${bottomWidth}px`,\n      'border-left-width': `${leftWidth}px`\n    };\n  }\n\n  ngAfterViewInit() {\n    const progress = this.progress.nativeElement;\n    // During SSR we don't need to do anything special here.\n    if (!progress || typeof progress.getTotalLength !== 'function') {\n      return;\n    }\n    const totalLength = progress.getTotalLength();\n    const audio = this.audio.nativeElement as HTMLAudioElement;\n    progress.setAttribute('stroke-dasharray', totalLength);\n    progress.setAttribute('stroke-dashoffset', totalLength);\n    audio.addEventListener('pause', () => (this.playing = false));\n    audio.addEventListener('play', () => (this.playing = true));\n    audio.addEventListener('timeupdate', () => {\n      const currentTime = audio.currentTime;\n      const maxduration = audio.duration;\n      const calc = totalLength - (currentTime / maxduration) * totalLength;\n\n      progress.setAttribute('stroke-dashoffset', calc);\n    });\n  }\n\n  seek(evnt: MouseEvent) {\n    const ratio = this._calculateAngle(evnt) / 360;\n    const audio = this.audio.nativeElement as HTMLAudioElement;\n    const seekTo = ratio * audio.duration;\n    audio.currentTime = seekTo;\n  }\n\n  get centerX() {\n    return 50;\n  }\n\n  get centerY() {\n    return 50;\n  }\n\n  get circleRadius() {\n    return 32;\n  }\n\n  get pauseLeftBarSize() {\n    return {\n      width: `${this.radius / 10}px`,\n      height: `${this.radius / 3.5}px`,\n      left: `calc(50% - ${this.radius / 12}px)`\n    };\n  }\n\n  get pauseRightBarSize() {\n    return {\n      width: `${this.radius / 10}px`,\n      height: `${this.radius / 3.5}px`,\n      left: `calc(50% + ${this.radius / 12}px)`\n    };\n  }\n\n  get playButtonRadius() {\n    return this.radius - this.radius / 3 + 'px';\n  }\n\n  private _calculateAngle(evnt: MouseEvent) {\n    const x = (RADIUS * 2) / (this.radius / evnt.offsetX);\n    const y = (RADIUS * 2) / (this.radius / evnt.offsetY);\n    const slope = (RADIUS - y) / (RADIUS - x);\n    const angle = 180 * (Math.abs(Math.atan(slope)) / Math.PI);\n\n    if (x <= RADIUS && y >= RADIUS) {\n      return angle;\n    }\n    if (x > RADIUS && y >= RADIUS) {\n      return 180 - angle;\n    }\n    if (x > RADIUS && y <= RADIUS) {\n      return 180 + angle;\n    }\n    return 180 + (180 - angle);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgxCircularPlayerComponent } from './ngx-circular-player.component';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [NgxCircularPlayerComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgxCircularPlayerComponent]\n})\nexport class NgxCircularPlayerModule { }\n","/*\n * Public API Surface of ngx-circular-player\n */\n\nexport * from './lib/ngx-circular-player.component';\nexport * from './lib/ngx-circular-player.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}