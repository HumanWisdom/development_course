<app-top-nav></app-top-nav>
<app-side-nav></app-side-nav>
<!-- page content -->
<div class="right_col" role="main">

	<!-- Class -->
	<div class="">
			
		<div class="page-title">							
		</div>

		<div class="clearfix"></div>
		
		<div class="row">
			<div class="col-md-8 col-sm-12 col-xs-12">
				<div class="x_panel">
						
					<div class="x_title">
						<h2>Add Stories</h2>
						<ul class="nav navbar-right panel_toolbox">
							<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
								<ul class="dropdown-menu" role="menu">
									<li><a href="#">Settings 1</a></li>
									<li><a href="#">Settings 2</a></li>
								</ul>
							</li>
							<li><a class="close-link"><i class="fa fa-close"></i></a></li>
						</ul>
						<div class="clearfix"></div>
					</div>
	
					<div class="x_content">
						<br />
														
						<form id="demo-form2" action="form_c.php" method="post">
							
							<div class="form-group">
								<div class="row-centered">
									<div class="col-md-8 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">Title<span class="required">*</span></label>
										<input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern="" [(ngModel)]="this.newTitle">
									</div>
								</div>
							</div>
							
							<div class="form-group">
								<div class="row-centered">
									<div class="col-md-8 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">Story<span class="required">*</span></label>
										<!-- <textarea id="message" required="required" class="form-control" name="message" rows="3"></textarea> -->
                                        <textarea id="message" required="required" class="form-control" name="message" rows="3" [(ngModel)]="this.newStory"></textarea>
									</div>
								</div>
							</div>

							<div class="form-group">
								<div class="row-centered">
									<div class="col-md-8 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">Message<span class="required">*</span></label>
										<!-- <textarea id="message" required="required" class="form-control" name="message" rows="3"></textarea> -->
										<textarea id="message" required="required" class="form-control" name="message" rows="3" [(ngModel)]="this.newMessage"></textarea>
                                        <!-- <input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern=""  [(ngModel)]="this.newMessage"> -->
									</div>
								</div>
							</div>

							<div class="form-group">
								<div class="row-centered">
									<div class="col-md-8 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">Image path<span class="required">*</span></label>
										<input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern=""  [(ngModel)]="this.imagePath">
									</div>
								</div>
							</div>											

                            <div class="form-group">
								<div class="row-centered">
									<!-- <div class="col-md-4 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">KeyTakeaways<span class="required">*</span></label>
										<input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern=""  [(ngModel)]="this.newTakeaway">
									</div> -->
                                    <div class="col-md-4 col-sm-6 col-xs-12 col-centered">
										<label for="patient_name" class="control-label">Excluded from children
                                        <span class="required">*</span></label>
                                        <select  name="program" class="select2_group form-control" [(ngModel)]="selectedExclusion"  (change)="selectExclusion($event.target.value)"required>
                                            <option *ngFor="let e of exclusionValues" [value]="e.value" >{{e.face}}</option>
                                      
                                        </select>
										<!--<input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern=""  [(ngModel)]="this.newExcluded">-->
									</div>
								</div>
							</div>
							
							
										
							<div class="ln_solid"></div>
						
							<div class="form-group">
								<div class="col-md-12 col-sm-6 col-xs-12" style="text-align:center;">
									<div *ngIf="!newTitle||!newStory||!selectedExclusion">
                                        <small class="text-danger">Please fill all details to submit</small>
                                    </div>
									<button type="reset" class="btn btn-primary" (click)="reset()">Reset</button>
									<input name="method" id="method" type="hidden" value="<?=$method?>">
									<input name="submit_Update" type="hidden">
									<button [disabled]="!newTitle||!newStory||!selectedExclusion"
									type="submit" form="demo-form2" class="btn btn-success" id="next" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3" (click)="addScenario()">Submit</button>
								</div>
							</div>
						
						</form>
						
					</div>
						
				</div>				
			</div>
			<div class="col-md-4 col-sm-12 col-xs-12">
				<div class="x_panel">
						
					<div class="x_title">
						<h2>Add Modules</h2>
						<ul class="nav navbar-right panel_toolbox">
							<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
								<ul class="dropdown-menu" role="menu">
									<li><a href="#">Settings 1</a></li>
									<li><a href="#">Settings 2</a></li>
								</ul>
							</li>
							<li><a class="close-link"><i class="fa fa-close"></i></a></li>
						</ul>
						<div class="clearfix"></div>
					</div>
	
					<div class="x_content">
						<br />
														
						<form id="demo-form2" action="" method="post">
							
							<div *ngFor="let t of appList;let i=index" class="form-group">
								<div class="row-centered">
									<div class="col-md-12 col-sm-6 col-xs-12 col-centered">
                                        <div class="checkbox m0px">
                                            <label class="cflex p0 mt0px">
                                                <input #checkboxModule type="checkbox" class="flat mt0px"  (change)="selectModule(t.ModuleID, $event.target.checked)"> 
                                                <span class="pl3rem">
													{{t.ModuleName}}
												</span>												
                                            </label>
                                        </div>
									</div>
								</div>
                            </div>
	
							<div class="ln_solid"></div>
						
							<div class="form-group">
								<div class="col-md-12 col-sm-6 col-xs-12" style="text-align:center;">
									<button type="reset" class="btn btn-primary" (click)="uncheck()">Reset</button>
									<input name="method" id="method" type="hidden" value="<?=$method?>">
									<input name="submit_Update" type="hidden">
									<button type="submit" form="demo-form2" class="btn btn-success" id="next" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3" (click)="add()">Add</button>
								</div>
							</div>
						
						</form>
						
					</div>
						
				</div>				
			</div>
            <div class="col-md-4 col-sm-12 col-xs-12">
				<div class="x_panel">
						
					<div class="x_title">
						<h2>Add Tags</h2>
						<ul class="nav navbar-right panel_toolbox">
							<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
								<ul class="dropdown-menu" role="menu">
									<li><a href="#">Settings 1</a></li>
									<li><a href="#">Settings 2</a></li>
								</ul>
							</li>
							<li><a class="close-link"><i class="fa fa-close"></i></a></li>
						</ul>
						<div class="clearfix"></div>
					</div>
	
					<div class="x_content">
						<br />
														
						<form id="demo-form2" action="" method="post">
							
							<div *ngFor="let t of tagList;let i=index" class="form-group">
								<div class="row-centered">
									<div class="col-md-12 col-sm-6 col-xs-12 col-centered">
                                        <div class="checkbox m0px">
                                            <label class="cflex p0 mt0px">
                                                <input #checkboxes type="checkbox" class="flat mt0px"  (change)="onChange(t.TagID, $event.target.checked)"> 
                                                <span class="pl3rem">
													{{t.TagName}}
												</span>												
                                            </label>
                                        </div>
									</div>
								</div>
                            </div>
	
							<div class="ln_solid"></div>
						
							<div class="form-group">
								<div class="col-md-12 col-sm-6 col-xs-12" style="text-align:center;">
									<button type="reset" class="btn btn-primary" (click)="uncheck()">Reset</button>
									<input name="method" id="method" type="hidden" value="<?=$method?>">
									<input name="submit_Update" type="hidden">
									<button type="submit" form="demo-form2" class="btn btn-success" id="next" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3" (click)="add()">Add</button>
								</div>
							</div>
						
						</form>
						
					</div>
						
				</div>				
			</div>


		</div>

        <div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				
				<div class="x_panel">	
					
					<div class="x_title">
						<h2>Scenario Details</h2>                                        
						<ul class="nav navbar-right panel_toolbox">
							                                          
						</ul>                                        
						<div class="clearfix"></div>
					</div>
					
					<div class="x_content">

						<div class="x_content">                                                                                        

							<div id="datatable-checkbox_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
								<div class="row">											
									
									<div class="col-md-8 col-sm-12 col-xs-12">                                                        										
										<label class="filter_label display_initial"><input type="search" id="filter1" class="form-control input-sm" placeholder="Search by title" aria-controls="datatable-checkbox"  [(ngModel)]="this.searchedTitle" (ngModelChange)="searchTitle()"></label>
                                        <label class="filter_label display_initial"><input type="search" id="filter1" class="form-control input-sm" placeholder="Search by tags" aria-controls="datatable-checkbox"  [(ngModel)]="this.searchedTag" (ngModelChange)="searchTag()"></label>																			
									</div>
									
									<div class="col-md-4 col-sm-12 col-xs-12">													
										<div class="search_btn">											
										</div>
									</div>
								</div>
							</div>

							<br>
							
							<table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
								<thead>
								<tr>
                                    <th>Title</th>
                                    
									<th>Excluded from children</th>  
									<th>Tags</th>
									<th>Modules</th>                                                 
                                          
									<th style="min-width: 10%;">Commands</th>
								</tr>
								</thead>
								<tbody>
								<tr *ngFor="let s of scenarioList;let i=index">                                                    
									<td>{{s.Title}}</td>                                                  
									<td>{{s.ExclFromChild}}</td>
									<td>{{s.TAGs}}</td>
									<td>{{s.Modules}}</td>

									
									<td>
										<button type="button" class="btn btn-xs btn-success command-add"><span class="glyphicon glyphicon-edit" (click)="initUpdate(s.ScenarioID,s.Title,s.Story,s.View,s.KeyTakeAway,s.ExclFromChild,s.TagIds,s.Img,s.Msg,s.ModIds)" data-toggle="modal"  [attr.data-target]="'#updateModal'+s.ScenarioID"></span></button>
										<button type="button" class="btn btn-xs btn-danger command-edit"><span class="glyphicon glyphicon-trash" data-toggle="modal" data-target="#editforum" (click)="deleteScenario(s.ScenarioID)"></span></button>                                                    
                                    </td>
                                    
                                    <div class="modal fade" [attr.id]="'updateModal'+s.ScenarioID" tabindex="-1" role="dialog" aria-labelledby="updateModal" aria-hidden="true">
                                        <div class="modal-dialog vc70" role="document">
                                          <div class="modal-content cmodal-content">
                                            <div class="modal-header cmodal-header tcenter white">
                                              <h1 class="modal-title cmodal-title"
                                              >Please enter new details</h1>
                                              
                                            </div>
                                            <div class="modal-body">
                                               
                                                <form id="demo-form2" action="form_c.php" method="post">
							
                                                    <div class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-8 col-sm-6 col-xs-12 col-centered">
                                                                <label for="p" class="control-label">Title<span class="required">*</span></label>
                                                                <input type="text" id="p" name="p" required="required" class="form-control" pattern="" [(ngModel)]="this.updatedTitle">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-8 col-sm-6 col-xs-12 col-centered">
                                                                <label for="story" class="control-label">Story<span class="required">*</span></label>
                                                                <!-- <textarea id="message" required="required" class="form-control" name="message" rows="3"></textarea> -->
																<textarea id="message" required="required" class="form-control" name="message" rows="3" [(ngModel)]="this.updatedStory"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>

													<div class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-8 col-sm-6 col-xs-12 col-centered">
                                                                <label for="story" class="control-label">Message<span class="required">*</span></label>
                                                                <!-- <textarea id="message" required="required" class="form-control" name="message" rows="3"></textarea> -->
																<textarea id="message" required="required" class="form-control" name="message" rows="3" [(ngModel)]="this.updatedMessage"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                        
                                                    <div class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-8 col-sm-6 col-xs-12 col-centered">
                                                                <label for="view" class="control-label">Image Path<span class="required">*</span></label>
                                                                <input type="text" id="view" name="view" required="required" class="form-control" pattern=""  [(ngModel)]="this.updatedImagePath">
                                                            </div>
                                                        </div>
                                                    </div>										
                        
                                                    <div class="form-group">
                                                        <div class="row-centered">
                                                            <!-- <div class="col-md-4 col-sm-6 col-xs-12 col-centered">
                                                                <label for="tw" class="control-label">KeyTakeaways<span class="required">*</span></label>
                                                                <input type="text" id="tw" name="tw" required="required" class="form-control" pattern=""  [(ngModel)]="this.updatedTakeaway">
                                                            </div> -->
                                                            <div class="col-md-4 col-sm-6 col-xs-12 col-centered">
                                                                <label for="ec" class="control-label">Excluded from children
                                                                <span class="required">*</span></label>
                                                                <select  name="ec" class="select2_group form-control" [(ngModel)]="updatedExclusion"  (change)="selectExclusion($event.target.value)"required>
                                                                    <option *ngFor="let e of exclusionValues" [value]="e.value" >{{e.face}}</option>
                                                              
                                                                </select>
                                                                <!--<input type="text" id="patient_name" name="patient_name" required="required" class="form-control" pattern=""  [(ngModel)]="this.newExcluded">-->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div *ngFor="let t of tagList;let i=index" class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-12 col-sm-6 col-xs-12 col-centered">
                                                                <div class="checkbox m0px">
                                                                    <label class="cflex p0 mt0px">
                                                                        <input #updatecheckboxes type="checkbox"  class="flat"  (change)="onUpdate(t.TagID, $event.target.checked)"> 
                                                                        {{t.TagName}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
													
													<div class="ln_solid"></div>

													<div *ngFor="let t of appList;let i=index" class="form-group">
                                                        <div class="row-centered">
                                                            <div class="col-md-12 col-sm-6 col-xs-12 col-centered">
                                                                <div class="checkbox m0px">
                                                                    <label class="cflex p0 mt0px">
                                                                        <input #updatecheckboxesModule type="checkbox"  class="flat"  (change)="onUpdateModule(t.ModuleID, $event.target.checked)" [checked]="updatedModules.includes(t.ModuleID)"> 
                                                                        {{t.ModuleName}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                                
                                                    <div class="ln_solid"></div>
                                                
                                                    
                                                
                                                </form>
                                             
                                            </div> 
                                            <div class="modal-footer cmodal-footer tcenter">        
                                              <button type="button" class="btn fill_now" data-dismiss="modal" (click)="updateScenario(s.ScenarioID)" >UPDATE</button>
                                              <button type="button" class="btn fill_later" data-dismiss="modal" >BACK</button>
                                            </div>
                                          </div>
                                        </div>
                                    </div>    
                                </tr>
								</tbody>
							</table>
							
							
							</div>

					</div>
				</div>
			</div>            
		</div>
	</div>
	<!--/Class -->
	
</div>
<!-- /page content -->
<app-footer></app-footer>