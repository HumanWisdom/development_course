<app-top-nav></app-top-nav>
<app-side-nav></app-side-nav>
<!-- page content -->
<div class="right_col" role="main">
    <!-- Class -->
    <div class="">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12 flex_ai">
                                <h2 class="w100imp">{{editUser ? 'Edit' : 'Add'}} Affiliate</h2>

                                <!-- <button type="reset" class="btn btn-success mr10px" data-toggle="modal"
                                    data-target="#add_affiliate">Add</button> -->
                            </div>
                        </div>
                    </div>
                    <div class="x_content">
                        <br />
                        <form [formGroup]="affiliateForm">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4 col-sm-12 col-xs-12">
                                        <label for="patient_name" class="control-label">Email Id</label>
                                        <input type="text" formControlName="Email" id="patient_name" name="patient_name"
                                            class="form-control">
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">First Name</label>
                                        <input type="text" formControlName="FName" id="patient_name" name="patient_name"
                                            class="form-control">
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Last Name</label>
                                        <input type="text" formControlName="LName" id="patient_name" name="patient_name"
                                            class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4 col-sm-6 col-xs-12" *ngIf="editUser">
                                        <label for="age" class="control-label">Coupon Code</label>
                                        <input type="text" id="age" name="age" class="form-control" formControlName="CouponCode">
                                    </div>

                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="age" class="control-label">Coupon % Discount</label>
                                        <input type="text" formControlName="CouponPercent" id="age" name="age"
                                            class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Percentage Commission</label>
                                        <input type="text" formControlName="PercentageSelf" id="patient_name"
                                            name="patient_name" class="form-control">
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Child Percentage
                                            Commission</label>
                                        <input type="text" formControlName="Percent_Child" id="patient_name"
                                            name="patient_name" class="form-control">
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">GrandChild Percentage
                                            Commission</label>
                                        <input type="text" formControlName="Percent_GrandChild" id="patient_name"
                                            name="patient_name" class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Select Parent Affiliate</label>
                                        <select class="form-control" (ngModelChange)="parentChange($event)"
                                            formControlName="AffliateParentID">
                                            <option disabled selected [value]="null">Choose option</option>
                                            <option [value]="parentAffiliate.UserID"
                                                *ngFor="let parentAffiliate of parentAffiliates">
                                                {{parentAffiliate.Name}}</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Name</label>
                                        <input type="text" id="patient_name" formControlName="parentName"
                                            name="patient_name" class="form-control">
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Email Id</label>
                                        <input type="text" formControlName="parentEmail" id="patient_name"
                                            name="patient_name" class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Paypal ID</label>
                                        <input type="text" id="patient_name" formControlName="PayPalID"
                                            name="patient_name" class="form-control" >
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-12">
                                        <label for="patient_name" class="control-label">Bank Details</label>
                                        <input type="text" placeholder="Add IBAN number and Swift Code for international money transfers" formControlName="BankDetails" id="patient_name" name="patient_name" class="form-control">
                                    </div>
                                </div>
                            </div>

                            <div class="ln_solid"></div>

                            <div class="form-group">
                                <div class="col-md-12 col-sm-6 col-xs-12" style="text-align:center;">
                                    <button type="submit" form="demo-form2" class="btn btn-success" id="next"
                                        data-toggle="collapse" data-target="#collapse3" aria-expanded="false"
                                        aria-controls="collapse3" (click)="addUser()">Submit</button>
                                </div>
                            </div>


                        </form>
                    </div>
                </div>
                <!-- modal -->
                <!-- <div class="modal fade" id="add_affiliate" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12 flex_ai">
                                        <div class="col-md-8 col-sm-8 col-xs-8">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Add Affiliate
                                            </h5>
                                        </div>
                                        <div class="col-md-4 col-sm-4 col-xs-4">
                                            <button type="button" class="close m0px" data-dismiss="modal"
                                                aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <form id="demo-form2" action="form_c.php" method="post">
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <label for="sex" class="control-label">Select Parent
                                                    Affiliate</label>
                                                <select id="sex" name="sex" class="select2_group form-control">
                                                    <option value="">Select</option>
                                                    <option value="m">Male</option>
                                                    <option value="f">Female</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-12 col-xs-12">
                                                <label for="patient_name" class="control-label">Name</label>
                                                <input type="text" id="patient_name" name="patient_name"
                                                    class="form-control">
                                            </div>
                                            <div class="col-md-6 col-sm-12 col-xs-12">
                                                <label for="patient_name" class="control-label">Email
                                                    Id</label>
                                                <input type="text" id="patient_name" name="patient_name"
                                                    class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary">Submit</button>
                            </div>
                        </div>
                    </div>
                </div> -->
                <!-- /modal -->
                <div class="x_panel" *ngIf="affiliates.length">
                    <div class="x_title">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12 flex_ai">
                                <h2 class="w100imp">Affiliate Details</h2>
                            </div>
                        </div>
                    </div>
                    <div class="x_content">
                        <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap"
                            cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th>Aff. Name</th>
                                    <th>Aff. EmailID</th>
                                    <th>Aff. ParentID</th>
                                    <th>Parent EmailID</th>
                                    <th>Children</th>
                                    <th>Grandchildren Count</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let affiliate of affiliates">
                                    <td class="text-primary" role="button" (click)="getUser(affiliate.UserID)">
                                        {{affiliate.AffName}}</td>
                                    <td>{{affiliate.AffEmail}}</td>
                                    <td>{{affiliate.AffliateParentID}}</td>
                                    <td>{{affiliate.ParentEmail}}</td>
                                    <td>{{affiliate.Children}}</td>
                                    <td>{{affiliate.grandChildrenCnt}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--/Class -->
</div>
<!-- /page content -->

<app-footer></app-footer>